!define(["conf","api","fun"],function(a,n,t){"use strict";return document.title="我的订单",function(i){$(function(){var e=function(){var e=$(".r-article",i),l=$(".r-article__ul",i),c=$("#loadMore",i),o=c.outerHeight(!0),s=this;this.bizCont={page:1,class_name:"calls"},this.canLoadPage=!0,this.fetchData=function(){s.canLoadPage=!1,n(s.bizCont,{type:"GET",url:"api/bill"}).then(function(n){if(n&&0==n.status){var i=n.data;if(i.length>0){s.canLoadPage=!0,s.bizCont.page+=1;var o=t.orderList(i);l.append(o),o=null,t.isShowLoading(e,c)}else s.canLoadPage=!1,c.show(),1==s.bizCont.page?c.html("您没有"+a.class_name[s.bizCont.class_name]+"订单详情，请选择查看其他类型的订单。"):c.html("没有更多数据")}else s.canLoadPage=!0,c.show(),c.html("没有更多数据")},function(){s.canLoadPage=!0})},this.tabClick=function(a){s.bizCont.page=1,s.canLoadPage=!0,$(".r-article",i).animate({scrollTop:"0px"},1),$(".r-article__ul",i).html(""),s.bizCont.class_name=a.data("name"),c.html('<div class="load6"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'),c.hide(),s.fetchData()},this.init=function(){t.jqInit(null,s.tabClick),$(document).on("click",".r-click",function(a){var n=$(a.target);t.payBack(n)}),e.on("scroll",function(){if(0==s.canLoadPage)return!1;var a=e.get(0),n=a.scrollHeight,t=a.clientHeight,i=a.scrollTop;n-=o,i+t>=n&&s.fetchData(),a=null,n=null,t=null,i=null});var a=$(".r-head__ul .active",i);s.bizCont.class_name=a.data("name"),a=null,s.fetchData()}},l=new e;l.init()})}});