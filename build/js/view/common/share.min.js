!define(["api","fun","conf","qrcode"],function(e,n,t,i){return document.title="SG易乐充",function(i){"use strict";$(function(){var o=t.dev?"/test":"",a=$("#shareQRCodes",i);e({},{type:"GET",url:"api/qrcode"}).then(function(e){e&&0==e.status?a.qrcode({render:"canvas",width:a.height(),height:a.height(),text:"https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket="+e.data.ticket}):(a.append('<img class="qrCodeImg" id="QRCode" src="'+o+'/build/img/QRCode.jpg" />'),$("#QRCode",i).prop("src",o+"/build/img/QRCode.jpg"))});var r="",u="正在获取积分规则，请稍后！";e({},{type:"GET",url:"api/text?text_name=credit_rule"}).then(function(e){e&&0==e.status?r=n.formTips(e.data):u="暂无积分规则"}),e({},{type:"GET",url:"api/user_info"}).then(function(e){if(e&&0==e.status){var n=e.data;wx.config({debug:!1,appId:n.app_id||"",timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.sign,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","hideMenuItems"]}),wx.ready(function(){var e={title:"SG易乐充",desc:"SG易乐充,您的充值管家!",imgUrl:o+"/build/img/card.jpg",type:"link"};wx.onMenuShareAppMessage(e),wx.onMenuShareTimeline(e),wx.onMenuShareQQ(e),wx.onMenuShareWeibo(e),wx.onMenuShareQZone(e),wx.hideMenuItems({menuList:["menuItem:openWithQQBrowser","menuItem:openWithSafari","menuItem:copyUrl"]})})}}),$("#showDetail",i).on("click",function(e){return r?void layer.open({title:!1,btn:!1,area:["88%","88%"],anim:4,scrollbar:!1,content:r}):(n.swal(u,"info"),!1)})})}});